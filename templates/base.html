<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Career Path Finder</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    .card {
      border-radius: 0.75rem;
      border: 1px solid rgba(56,189,248,0.35); /* cyan-400 */
      background: #0b1220; /* clean dark panel */
      padding: 2rem;
      box-shadow: 0 0 0 1px rgba(56,189,248,0.25) inset, 0 12px 28px rgba(0,0,0,0.45), 0 0 36px rgba(37,99,235,0.15);
      position: relative;
      overflow: hidden;
      transition: box-shadow .25s ease, transform .2s ease;
    }
    .card:hover { box-shadow: 0 0 0 1px rgba(56,189,248,0.45) inset, 0 14px 34px rgba(0,0,0,0.5), 0 0 54px rgba(56,189,248,0.25); }
    .btn {
      display: inline-block;
      border-radius: 0.5rem;
      background: linear-gradient(135deg, #2563eb 0%, #22d3ee 100%);
      padding: 0.55rem 1.1rem;
      color: #0b1020;
      font-weight: 600;
      transition: box-shadow 0.25s ease, transform 0.12s ease, filter .25s ease;
      text-decoration: none;
    }
    .btn:hover { box-shadow: 0 0 22px rgba(34,211,238,0.55), 0 8px 24px rgba(37,99,235,0.45); transform: translateY(-1px); filter: saturate(1.1); }
    .btn:active { transform: translateY(0); }
    .btn:focus-visible { outline: none; box-shadow: 0 0 0 3px rgba(34,211,238,0.45), 0 0 0 6px rgba(37,99,235,0.35); }
    .btn-secondary {
      display: inline-block;
      border-radius: 0.5rem;
      background-color: rgba(255,255,255,0.15);
      padding: 0.5rem 1rem;
      color: #e5e7eb;
      transition: background-color 0.15s ease-in-out, box-shadow .25s ease;
      text-decoration: none;
    }
    .btn-secondary:hover { background-color: rgba(255,255,255,0.25); box-shadow: 0 0 18px rgba(255,255,255,0.15); }
    .input {
      width: 100%;
      border-radius: 0.75rem;
      border: 1px solid rgba(255,255,255,0.25);
      padding: 0.6rem 0.9rem;
      outline: none;
      background: rgba(255,255,255,0.9);
      color: #0f172a;
      box-shadow: 0 1px 2px rgba(0,0,0,0.12);
      transition: box-shadow .25s ease, border-color .25s ease, transform .12s ease;
    }
    .input:hover { border-color: #60a5fa; box-shadow: 0 0 0 3px rgba(59,130,246,0.25), 0 6px 20px rgba(37,99,235,0.15); }
    .input:focus { box-shadow: 0 0 0 3px rgba(34,211,238,0.35), 0 8px 26px rgba(37,99,235,0.2); border-color: #22d3ee; }
    .label {
      display: block;
      font-size: 0.875rem;
      font-weight: 500;
      color: #cfd4dc;
      margin-bottom: 0.25rem;
    }
    .container {
      max-width: 56rem; /* ~max-w-4xl */
      margin-left: auto;
      margin-right: auto;
      padding: 1.25rem;
    }
    @media (min-width: 640px) { .container { padding: 1.5rem; } }
    @media (min-width: 1024px) { .container { padding: 2rem; } }
    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 1.5rem;
    }
    .flash { margin: 0.75rem 0; padding: 0.75rem; border-radius: 0.5rem; }
    body {
      color: #e5e7eb;
      background: radial-gradient(ellipse at center, #0b0f1a 0%, #05070d 60%, #000000 100%);
      min-height: 100vh;
      font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, 'Apple Color Emoji', 'Segoe UI Emoji';
    }
    /* Global starfield canvas */
    #starfield {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      display: block;
      z-index: -1;
      background: transparent;
      pointer-events: none;
    }
  </style>
  {% block extra_head %}{% endblock %}
</head>
<body class="relative">
  <canvas id="starfield"></canvas>
  <nav class="border-b border-transparent">
    <div class="container nav">
      <a href="/" class="font-semibold text-white">Career Path Finder</a>
      <div class="space-x-3">
        {% if session.get('user') %}
        <a href="{{ url_for('dashboard') }}" class="text-sm text-gray-200 hover:text-white">Dashboard</a>
        <a href="{{ url_for('history') }}" class="text-sm text-gray-200 hover:text-white">History</a>
        <a href="{{ url_for('logout') }}" class="text-sm text-red-300 hover:text-red-200">Logout</a>
        {% else %}
        <a href="{{ url_for('login') }}" class="text-sm text-gray-200 hover:text-white">Login</a>
        <a href="{{ url_for('signup') }}" class="text-sm text-gray-200 hover:text-white">Sign up</a>
        {% endif %}
      </div>
    </div>
  </nav>
  <main class="container">
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="flash {{ 'bg-green-900/30 text-green-200' if category=='success' else 'bg-red-900/30 text-red-200' }}">{{ message }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}
    <div class="card">
      {% block content %}{% endblock %}
    </div>
  </main>
  {% block extra_body_end %}{% endblock %}
  <script>
    // Global starfield animation
    (function(){
      const canvas = document.getElementById('starfield');
      const ctx = canvas.getContext('2d');
      let stars = [];
      const STAR_COUNT = 180;
      const DPR = Math.max(1, window.devicePixelRatio || 1);

      function resize(){
        canvas.width = Math.floor(window.innerWidth * DPR);
        canvas.height = Math.floor(window.innerHeight * DPR);
        ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
        if (!stars.length) init();
      }

      function init(){
        stars = new Array(STAR_COUNT).fill(0).map(() => ({
          x: Math.random() * window.innerWidth,
          y: Math.random() * window.innerHeight,
          z: Math.random() * 0.8 + 0.2,
          r: Math.random() * 1.5 + 0.3,
          tw: Math.random() * Math.PI * 2,
          sp: Math.random() * 0.3 + 0.05,
        }));
      }

      function draw(){
        ctx.clearRect(0,0,canvas.width,canvas.height);
        for (const s of stars){
          s.x += s.sp * s.z;
          s.y += s.sp * 0.2 * s.z;
          if (s.x > window.innerWidth + 10) s.x = -10;
          if (s.y > window.innerHeight + 10) s.y = -10;

          s.tw += 0.03 + s.sp * 0.02;
          const alpha = 0.5 + Math.sin(s.tw) * 0.5;

          ctx.beginPath();
          const g = ctx.createRadialGradient(s.x, s.y, 0, s.x, s.y, s.r*4);
          g.addColorStop(0, `rgba(255,255,255,${0.8*alpha})`);
          g.addColorStop(1, 'rgba(255,255,255,0)');
          ctx.fillStyle = g;
          ctx.arc(s.x, s.y, s.r*4, 0, Math.PI*2);
          ctx.fill();

          ctx.beginPath();
          ctx.fillStyle = `rgba(255,255,255,${0.9*alpha})`;
          ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
          ctx.fill();
        }
        requestAnimationFrame(draw);
      }

      window.addEventListener('resize', resize);
      resize();
      draw();
    })();
  </script>
</body>
</html>

